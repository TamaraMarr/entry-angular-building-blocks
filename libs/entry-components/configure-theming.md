# Theming Configuration Guide

### Table of Contents
- [Overview](#overview)
- [Prerequisites](#prerequisites)
- [Project Structure](#project-structure)
- [Styles Configuration](#styles-configuration)
- [Custom Theme Definition](#custom-theme-definition)
- [Theme Configuration Approaches](#theme-configuration-approaches)
   - [Native Angular Material Configuration](#1-native-angular-material-configuration)
   - [Simplified Configuration](#2-simplified-configuration)
      - [Configuration Properties](#2a-configuration-properties)
         - [General Submap](#general-submap)
         - [Fonts Usage in Theming](#fonts-usage-in-theming)
         - [Tables Submap](#tables-submap)
         - [Dialogs Submap](#dialogs-submap)
- [Useful links](#useful-links)

## Overview
The **entry-components** library comes with generator mixin which simplifies project theming by eliminating the need for extensive custom styling   While it comes with default settings, it offers the flexibility to be configured to meet the unique requirements of each project. A wide range of properties can be leveraged to introduce varied style changes when configured appropriately. The guide provides a detailed walkthrough of this process.

## Prerequisites
Ensure that the following libraries are installed:   
- [`@enigmatry/entry-components`](https://www.npmjs.com/package/@enigmatry/entry-components)
- [`@enigmatry/entry-form`](https://www.npmjs.com/package/@enigmatry/entry-form)

## Project structure
We need separate file for including theme related style files. By our [SCSS coding standard](https://wiki.enigmatry.com/en/standards-and-guidelines/sass-coding-standard) it should be inside `styles/partials/vendors/libraries` subfolder. Create entry subfolder if it isn't already defined in project.The entry subfolder should contain the following SCSS partials:

1. `_index.scss` entry point for mainating good SCSS structure
2. `_general.scss` - Imports necessary library generator files for configuring theming.
3. `_scss-foundation.scss` - imports the scss foundation library

## Styles Configuration
Within the `general.scss` partial, import the generator file from the library and our custom variables related to the project.

The generator file represents a collection of includes and a mixin that, when used, generates styles for various components based on a combination of a default theme and a custom theme. The generators for each entry component handle the specifics of styling based on the provided theme. You can check which components are supported on the [Components demo](https://entry-demo.enigmatry.com/) application.

In summary, the generator:
- Includes multiple generator files for supported entry components (dialog, table, button, form...)
- Generates [Angular Material](https://material.angular.io/guide/theming) for customization of color pallets, typography, and density settings
- Sets up  default, boilerplate theme with predefined values
- Combines default theme and custom theme styles

```
@use 'entry-components/styles/generator'
@use 'variables' as vars;
```

## Custom Theme Definition
Next, define the $custom-theme map that will be expanded with various customization options based on specific needs.

```
$custom-theme: ();
```

Include and apply the styles generated by the generate-from mixin in the 'generator' module, using the customization options provided in the $custom-theme map. 

```
@include generator.generate-from($custom-theme);
```

Our theme is now an empty object, and default library theme is used.

```
@use 'entry-components/styles/generator';
@use 'variables' as vars;

$custom-theme: (
);

@include generator.generate-from($custom-theme);
```

## Theme Configuration Approaches
We have 2 ways how to change fonts and colors;
1. Native Angular Material way. Configure every single thing in Angular material need complex hex colors configuration. It depends of the situation. We have ligher and darker variations. 
2. just pass and theming do rest, prefferable and simple version. We try this one to always use.
 
### 1. Native Angular Material Configuration
With this approach we configure every little piece in Angular material. There is lighter and darker versions of color. Bellow is example for that.

```
$typo: (headline-1: (font-size: 96px, line-height: 96px, font-weight: 300, font-family: 'roboto, sans-serif', letter-spacing: -.015625em),
headline-2: (font-size: 60px, line-height: 60px, font-weight: 300, font-family: 'roboto, sans-serif', letter-spacing: -.0083333333em), 
headline-3: (font-size: 48px, line-height: 50px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: normal),
headline-4: (font-size: 34px, line-height: 40px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .0073529412em), 
headline-5: (font-size: 32px, line-height: 32px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: normal), 
headline-6: (font-size: 32px, line-height: 32px, font-weight: 500, font-family: 'roboto, sans-serif', letter-spacing: .0125em),
subtitle-1: (font-size: 32px, line-height: 28px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .009375em),
subtitle-2: (font-size: 32px, line-height: 22px, font-weight: 500, font-family: 'roboto, sans-serif', letter-spacing: .0071428571em),
body-1: (font-size: 16px, line-height: 24px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .03125em), 
body-2: (font-size: 14px, line-height: 20px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .0178571429em), 
caption: (font-size: 32px, line-height: 20px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .0333333333em),
button: (font-size: 24px, line-height: 36px, font-weight: 500, font-family: 'roboto, sans-serif', letter-spacing: .0892857143em), 
overline: (font-size: 12px, line-height: 32px, font-weight: 500, font-family: 'roboto, sans-serif', letter-spacing: .1666666667em), 
'font-family': 'roboto, sans-serif');
$prim: (
	50 : #E6E6E6,
	100 : #C0C0C0,
	200 : #2B95DB,
	300 : #7FE2F3,
	400 : #B5D117,
	500 : hsl(78 78% 47%),
	600 : #C953EC,
	700 : #1A81C5,
	800 : #209E94,
	900 : #2FC955,
	A100 : #209E94,
	A200 : #1A81C5,
	A400 : #C953EC,
	A700 : #B5D117,
	contrast: (
		50 : #000,
		100 : #000,
		200 : #000,
		300 : #FFF,
		400 : #FFF,
		500 : #FFF,
		600 : #FFF,
		700 : #FFF,
		800 : #FFF,
		900 : #FFF,
		A100 : #000,
		A200 : #FFF,
		A400 : #FFF,
		A700 : #FFF,
	)
);

$custom-theme: (
	general: (
		colors: (
			primary-theme: $prim,
			accent-theme: $prim
		),
		typography: $typo
	)
);

@include generator.generate-from($custom-theme);

```

## 2. Simplified Configuration

### 2a. Configuration Properties

The new custom-theme map variable should override the default theme that is already defined. It contains a nested structure defining various aspects of a theme. Different key parameters can be passed in to extend it and customize it for our needs.

| Submap     | Description              | Possible Options                  |
|--------------|--------------------------|----------------------------------|
| **general**    | settings that influence the overall appearance and behavior of the components.   | `typography`, <br> `fonts`,<br> `spacing`,<br> `inputs`,<br> `buttons`         |
| **tables**    | customize table component styling   | `cells`, <br> `rows`,<br> `contents`        |
| **dialogs**    | set dialog font size   | `title`         |
<br>
> **_NOTE:_** Submaps can't be nested inside each other

#### General Submap:

The `general` section in the `$theme` configuration contains settings that shape the overall look and behavior of the components.

- **Density:** set to `0` by default, controls the spacing and compactness of elements. Other possibilites are -`1` & `1`. For  [more info check](https://m2.material.io/design/layout/applying-density.html#usage)

- **Colors:** defines various color properties:
  - `primary` and `accent` represent the default primary and accent colors.
  - `font` specifies the default font color.
  - `disabled` contains settings for disabled state:
    - `foreground` defines the text color for disabled elements.
    - `background` specifies the background color for disabled elements.

- **Fonts:** allow customization of typography and font styles. We can use  predefined fonts that comes with `entry-components` library or our own project required customised fonts.
  - `hero-titles` define typography for h1, h2, h3, h4 elements. 
    - `family`
    - `size` 
  - `titles` define typography h3, h4 elements
    - `family`
    - `size` 
  - `body` define typography for base body text. To apply it on whole body of the app, add .mat-body class to the body element in index.html file in app root
    - `family`
    - `size` 
     ```
    <body class="mat-body">
      <app-root></app-root>
    </body>
    ```
  - `buttons` define buttons and anchors
    - `family`
    - `size` 

  > **_NOTE:_** Since we're overriding Angular Material, it is important to add CSS classes for mixin that emits styles for native header elements scoped within the .mat-typography CSS class

  | CSS class      | Example                                       |
  | -------------- | --------------------------------------------- |
  | .mat-headline-1   | `<h1 class="mat-headline-1">{{title}}</h1>`|
  | .mat-headline-2   | `<h2 class="mat-headline-2">{{title}}</h2>`|
  | .mat-headline-3   |                                            |
  | .mat-headline-4   |                                            |



- **Spacing:** The submap, with a default of `15px`, determines the default spacing between elements.

- **Buttons:** Additional customization buttons: 
    - `icon-size` - defines the default icon size for buttons. 

Code Example of general submap configuration:

```
$theme: (
	general: (
		density: 0,
		colors: (
			primary: #2581C4,
			accent: #EA518D,
			font: #323232,
			disabled: (
				foreground: rgb(0 0 0 / .38),
				background: rgb(0 0 0 / .12)
			)
		),
		fonts: (
			hero-titles: (
				family: 'Times New Roman',
				size: 30px
			),
			titles: (
				family: 'Inter',
				size: 14px
			)
		),
		spacing: (
			default: 15px
		),
		buttons: (
			icon-size: 48px
		)
	)
)
```

#### Fonts Usage in Theming

There are 2 possibilities of using fonts in our custom theme:

1. **Default Fonts Configuration**:
  Entry-components library comes with default fonts. It includes Montserrat, OpenSans and Roboto font family. When opting for default fonts, the necessary configuration takes place in the `angular.json` file at the root of the app. The fonts are imported from the node modules and specified in the "assets" section as follows:  
  ```
   "assets": [
      "src/favicon.ico",
      "src/assets",
      {
        "glob": "**/*",
        "input": "./node_modules/@enigmatry/entry-components/assets/",
        "output": "/assets/"
      }
    ],
  ```
2. **Custom Fonts Configuration**, they needs to be imported locally in separated file using @font-face rule (our preferable SCSS structure is modules/components/typography/fonts.scss).

  ```
    @font-face {
    font: {
      family: 'OpenSans-Bold';
      weight: 700;
    }
    src: url('/assets/fonts/Helvetica.woff2') format('woff2'), url('/assets/fonts/Helvetica.woff') format('woff');
}
  ```

### Tables Submap:

The `tables` section in the `$theme` configuration handles how table components are styled and themed.

- **Cells:** contains properties related to individual cells in a table:
  - `edge-gap` specifies the gap between cell edges.
  - `padding` allows customization of cell padding.

- **Rows:** handles the appearance of table rows:
  - `selected-color` sets the background color for selected rows.
  - `disabled-color` defines the background color for disabled rows.
  - `odd-even-row` determines whether odd or even rows are styled differently.
  - `odd-even-background` sets the background color for odd or even rows.

- **Contents:** manages the styling of table content:
  - `no-result` contains properties for the appearance of a message displayed when there are no search results:
    - `font-size` specifies the font size of the message.
    - `font-weight` controls the font weight of the message.

```
$theme: (
	tables: (
		cells: (
			edge-gap: 4px,
			padding: null
		),
		rows: (
			selected-color: #FFF,
			disabled-color: #F5F5F5,
			odd-even-row: odd,
			odd-even-background: #F0F0F0
		),
		contents: (
			no-result: (
				font-size: 13px,
				font-weight: 500
			)
		)
	)
);
```

### Dialogs Submap:

The `dialogs` submap within `$theme` focuses on configuring the appearance of dialog components.

- **Title:** includes properties related to the title of a dialog:
  - `size` determines the font size of the dialog title.

```
$theme: (
	dialogs: (
		title: (
			size: 20px
		)
	)
);
```

## Useful links
- [Theming Guide](https://material.angular.io/guide/theming)
- [Typography Guide](https://material.angular.io/guide/typography)
- [Sass Map Module](https://sass-lang.com/documentation/modules/map/)
