# Theming Configuration Guide

### Table of Contents

- [Overview](#overview)
- [Prerequisites](#prerequisites)
- [Angular Material Documentation](#angular-material-documentation)
- [Project Structure](#project-structure)
- [Styles Configuration](#styles-configuration)
- [Create custom theme](#create-custom-theme)
- [Importing fonts](#importing-fonts)
  - [Use default font](#1-use-default-roboto-font) 
  - [Preparing custom fonts](#2-preparing-custom-fonts)
- [Configuration Properties](#configuration-properties)
- [Theme Configuration Approaches](#theme-configuration-approaches)
  - [Simplified Configuration](#1-simplified-configuration)
      - [General Configuration](#general-configuration)
      - [Tables Configuration](#tables-configuration)
      - [Dialogs Configuration](#dialogs-configuration)
  - [Native Angular Material Configuration](#2-native-angular-material-configuration)
- [Default values table](#default-values-table)

## Overview

The **entry-components** library comes with a generator which simplifies project theme by eliminating the need for extensive custom styling. While the library comes with default settings, it provides the flexibility to be configured according to the unique requirements of each project. A wide range of properties can be leveraged to introduce varied style changes when configured appropriately. The guide provides a detailed walkthrough of this process.

## Prerequisites
Before diving into theming configurations, make sure to address the following prerequisites:

- Ensure that the latest version of the [`entry-components`](https://www.npmjs.com/package/@enigmatry/entry-components) library is installed
- Prepare custom fonts  if customers require them, follow the instructions [`here`](#2-preparing-custom-fonts)
- For a deeper understanding of theming concepts and customization options, refer to the [Angular Material documentation](#angular-material-documentation)

### Angular Material Documentation

To gain a comprehensive understanding of theming configurations, it is highly recommended to consult the official Angular Material documentation. Familiarizing Material's theming and typography guides will provide crucial insights into the available customization options.

- [Theming Guide](https://material.angular.io/guide/theming)
- [Theming your own components](https://material.angular.io/guide/theming-your-components)
- [Typography Guide](https://material.angular.io/guide/typography)

## Project structure

We require a dedicated file to include theme-related style configurations. Adhering to our [SCSS coding standard](https://wiki.enigmatry.com/en/standards-and-guidelines/sass-coding-standard), this file should be within the `styles/partials/vendors/libraries` subfolder. If the `entry` subfolder is not already defined in the project, create it. Within the `entry` subfolder, the following SCSS partials should be created:

```diff
├── libraries
+    └── entry
+      ├── _general.scss
+      └── _index.scss
```

- `general.scss` -Imports necessary library generator files for configuring theming.
- `index.scss` entry point for maintaining good SCSS structure

## Styles Configuration

In summary, the generator:

- Includes multiple generator files for supported entry components (dialog, table, button, form...)
- Generates [Angular Material](https://material.angular.io/guide/theming) for customization of color palettes, typography, and density settings
- Sets up  default, boilerplate theme with predefined values
- Combines default theme and custom theme styles

```scss
@use 'entry-components/styles/generator';
```

## Create custom theme

Next, define the $custom-theme map that will be expanded with various customization options based on specific needs.

```scss
$custom-theme: ();
```

Include and apply the styles generated by the generate-from mixin in the 'generator' module, using the customization options provided in the $custom-theme map.

```scss
@include generator.generate-from($custom-theme);
```

Our theme is now an empty object, and default library theme is used.

```scss
@use 'entry-components/styles/generator';

$custom-theme: (
);

@include generator.generate-from($custom-theme);

```

## Importing Fonts

There are 2 possibilities of using fonts in theming:

### 1. Use default Roboto font

**Entry-components** library comes with the default **Roboto** font family. To utilize it, configuration in the `angular.json` file at the root of the app is necessary. The font is imported from the library's node modules as follows:  

```json
"assets": [
  "src/favicon.ico",
  "src/assets",
  {
    "glob": "**/*",
    "input": "./node_modules/@enigmatry/entry-components/assets/",
    "output": "/assets/"
  }
],
```

### 2. Preparing custom fonts

Ensure that the following steps are completed:

1. Place custom font files in the `assets/fonts/` folder of project.
2. Create a dedicated SCSS file (e.g., `partials/core/fonts.scss`)
3. Use the `@font-face` rule in `fonts.scss` to define custom fonts with an absolute path.

```scss
@font-face {
  font: {
    family: 'Helvetica';
    weight: 400;
  }
  src: url('/assets/fonts/Helvetica.woff2') format('woff2'), url('/assets/fonts/Helvetica.woff') format('woff');
}
```

### Configuration Properties

The new **custom theme map** should replace the library's default theme. The structure is nested and defines various aspects of a theme. It can be extended and customized for project needs by passing on different key parameters. The structure consists of three main sections: **general**, **tables**, and **dialogs**. Each section contains a specific configuration.

> **_NOTE:_**  Any property in the theming configuration can be skipped, and if omitted, the **default value** for that property will be used (unless it's specified differently, as for fonts). This provides flexibility for developers to customize only the specific aspects of the theme that are relevant to their project. See table with default values [here](#default-values-table)

| Submap       | Description                                                             | Possible Options                      |
|--------------|-------------------------------------------------------------------------|----------------------------------------|
| **general**  | Influence the overall appearance and behavior of components. | `typography`, `fonts`, `spacing`, `inputs`, `buttons` |
| **tables**   | Customize table component styling.                                       | `cells`, `rows`, `contents`            |
| **dialogs**  | Set dialog font size.                                                   | `title`                                |

```scss
$custom-theme: (
  general: (
    // General configuration options go here
  ),
  tables: (
    // Table-related configuration options go here
  ),
  dialogs: (
  / / Dialog-related configuration options go here
  )
);
```

## Theme Configuration Approaches

The theme can be configured in two ways. We highly suggest using the first approach, since it's very simple and easy to understand. If there are specific needs that cannot be met with simple theming, the native Angular Material approach is inevitable. It's crucial to note that it's not feasible to combine both methods; choose and follow one of the approaches instead.

## 1. Simplified Configuration

### General Configuration

The `general` section in the `$custom-theme` configuration contains settings that shape the overall look and behavior of the components.

#### Density

The density property typically accepts values like **-1**, **0**  default), and **1**, which correspond to different levels of density. For  [more info check](https://m2.material.io/design/layout/applying-density.html#usage):

- `-1`: Reduces the spacing and makes elements more compact.
- `0`: Default density according to the Material Design guidelines.
- `1`: Increases spacing, providing a more relaxed and open layout.

```scss
$custom-theme: (
  general: (
    density: 0
  )
);
```

#### Colors

Defines various color properties:

- `primary`: Main color used in application, it sets the tone for the overall theme
- `accent`: Highlight certain elements and create visual interest
- `font`: Specifies the default font color.
- `disabled`: Style elements that are in a disabled state:
  - `foreground`: Text color for disabled elements
  - `background`: Background color for disabled elements

```scss
$custom-theme: (
  general: (
    density: 0,
    colors: (
      primary: #2581C4,
      accent: #EA518D,
      font: #323232,
      disabled: (
        foreground: rgb(0 0 0 / .38),
        background: rgb(0 0 0 / .12)
      )
    )
  )
);
```

#### Fonts

Allow customization of typography and font styles based od Angular Material typography levels. Each font related property in configuration can have **family** and **size** values.

- `hero-titles`: Define typography for h1, h2, h3, h4 elements.
- `titles`: Typography for h5 and h6 material subtitles
- `body`: Define typography for base body text.
- `buttons`: Typography for buttons and anchors

> **_NOTE:_**  Don't forget to check whether font is being applied by checking font families.

```scss
$custom-theme: (
  general: (
    density: 0,
    colors: (
      primary: #2581C4,
      accent: #EA518D,
      font: #323232,
      disabled: (
        foreground: rgb(0 0 0 / .38),
        background: rgb(0 0 0 / .12)
      )
    ),
    fonts: (
      hero-titles: (
        family: 'Helvetica',
        size: 40px
      ),
      titles: (
        family: 'Roboto',
        size: 25px
      ),
      body: (
        family: 'Helvetica',
        size: 20px
      ),
      buttons: (
        family: 'Roboto',
        size: 10px
      )
    ),
  )
);
```

To apply it on whole body of the app, add `.mat-body` class to the body element in index.html file in app root

```html
<!-- Applying mat-body class to the root component in index.html -->
<body class="mat-body">
<app-root></app-root>
</body>
```

Since we're overriding Angular Material, it is important to add CSS classes for mixin that emits styles for native header elements scoped within the .mat-typography CSS class

| CSS class      | Example                                       |
| -------------- | --------------------------------------------- |
| .mat-headline-1   | `<h1 class="mat-headline-1">{{title}}</h1>`|
| .mat-headline-2   | `<h2 class="mat-headline-2">{{title}}</h2>`|

#### Spacing

The submap providing the necessary spacing information for styling the **entry form**, **search form button** and **form field**

```scss
$custom-theme: (
  general: (
    spacing: (
      default: 15px
    ),
  )
);
```

#### Inputs

We utilize the background value within the inputs configuration to establish the background color for **form text fields**. By default, background property has no color explicitly defined, allowing the default Material styling or any existing CSS rules to take effect.

```scss
$custom-theme: (
  general: (
    spacing: (
      default: 15px
    ),
    inputs: (
      background: 15px
    ),
  )
);
```

#### Buttons

Additional customization  for buttons:

- `icon-size` - sets the default size for icons on buttons when icons are present.

Code Example of general submap configuration:

```scss
$custom-theme: (
  general: (
    buttons: (
      icon-size: 48px
    )
  )
)
```

### Tables Configuration

The `tables` section in the `$custom-theme` configuration handles how table components are styled and themed.

#### Cells

Contains properties related to individual cells in a table:

- `edge-gap` specifies the gap between cell edges.
- `padding` allows customization of cell padding.

#### Rows

Handles the appearance of table rows:

- `selected-color` sets the background color for selected rows.
- `disabled-color` defines the background color for disabled rows.
- `odd-even-row` determines whether odd or even rows are styled differently.
- `odd-even-background` sets the background color for odd or even rows.

#### Contents

Manages the styling of table content:

- `no-result` contains properties for the appearance of a message displayed when there are no search results:
- `font-size` specifies the font size of the message.
- `font-weight` controls the font weight of the message.

```scss
$custom-theme: (
  tables: (
    cells: (
      edge-gap: 4px,
      padding: null
    ),
    rows: (
      selected-color: #FFF,
      disabled-color: #F5F5F5,
      odd-even-row: odd,
      odd-even-background: #F0F0F0
    ),
    contents: (
      no-result: (
        font-size: 13px,
        font-weight: 500
      )
    )
  )
);
```

### Dialogs Configuration

The `dialogs` submap within `$custom-theme` focuses on configuring the appearance of dialog components.

#### Title

Includes properties related to the title of a dialog:

- `size` determines the font size of the dialog title.

```scss
$custom-theme: (
  dialogs: (
    title: (
      size: 20px
    )
  )
);
```

## 2. Native Angular Material Configuration

In this approach, we carefully set up every little detail within entry components. Angular Material offers a predefined color palette for application, covering range of  primary, accent, and warn colors.
When a project necessitates many illogical Angular Material overrides that we don't want to support with regular theming, this approach is necessary. It can also be useful in situations where we need more granual control over the variations of primary and accent colors, as well as their shadows.

Bellow is example:

```scss
$typography: (headline-1: (font-size: 96px, line-height: 96px, font-weight: 300, font-family: 'roboto, sans-serif', letter-spacing: -.015625em),
headline-2: (font-size: 60px, line-height: 60px, font-weight: 300, font-family: 'roboto, sans-serif', letter-spacing: -.0083333333em), 
headline-3: (font-size: 48px, line-height: 50px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: normal),
headline-4: (font-size: 34px, line-height: 40px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .0073529412em), 
headline-5: (font-size: 32px, line-height: 32px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: normal), 
headline-6: (font-size: 32px, line-height: 32px, font-weight: 500, font-family: 'roboto, sans-serif', letter-spacing: .0125em),
subtitle-1: (font-size: 32px, line-height: 28px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .009375em),
subtitle-2: (font-size: 32px, line-height: 22px, font-weight: 500, font-family: 'roboto, sans-serif', letter-spacing: .0071428571em),
body-1: (font-size: 16px, line-height: 24px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .03125em), 
body-2: (font-size: 14px, line-height: 20px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .0178571429em), 
caption: (font-size: 32px, line-height: 20px, font-weight: 400, font-family: 'roboto, sans-serif', letter-spacing: .0333333333em),
button: (font-size: 24px, line-height: 36px, font-weight: 500, font-family: 'roboto, sans-serif', letter-spacing: .0892857143em), 
overline: (font-size: 12px, line-height: 32px, font-weight: 500, font-family: 'roboto, sans-serif', letter-spacing: .1666666667em), 
'font-family': 'roboto, sans-serif');
$primary: (
  50 : #E6E6E6,
  100 : #C0C0C0,
  200 : #2B95DB,
  300 : #7FE2F3,
  400 : #B5D117,
  500 : hsl(78 78% 47%),
  600 : #C953EC,
  700 : #1A81C5,
  800 : #209E94,
  900 : #2FC955,
  A100 : #209E94,
  A200 : #1A81C5,
  A400 : #C953EC,
  A700 : #B5D117,
  contrast: (
    50 : #000,
    100 : #000,
    200 : #000,
    300 : #FFF,
    400 : #FFF,
    500 : #FFF,
    600 : #FFF,
    700 : #FFF,
    800 : #FFF,
    900 : #FFF,
    A100 : #000,
    A200 : #FFF,
    A400 : #FFF,
    A700 : #FFF,
  )
);

$custom-theme: (
  general: (
    colors: (
      primary-theme: $primary,
      accent-theme: $primary
    ),
    typography: $typography
  )
);

@include generator.generate-from($custom-theme);
```

## Default values table

The table below outlines the default values for various configuration properties. If a specific value is not explicitly defined in your project's configuration, the system will default to the values listed here.

| Category         | Property                        | Default Value                       |
|------------------|---------------------------------|-------------------------------------|
| **general**      | density                         | 0                                   |
|                  | primary-theme                   | null                                |
|                  | accent-theme                    | null                                |
|                  | primary                         | #2581C4                             |
|                  | accent                          | #EA518D                             |
|                  | font                            | #323232                             |
|                  | disabled/foreground             | rgb(0 0 0 / .38)                    |
|                  | disabled/background             | rgb(0 0 0 / .12)                    |
|                  | typography                      | null                                |
|                  | family                          | ''                                  |
|                  | size                            | 0                                   |
|                  | default                         | 15px                                |
|                  | inputs/background               | null                                |
|                  | icon-size                       | 48px                                |
| **tables**       | edge-gap                        | 4px                                 |
|                  | padding                         | null                                |
|                  | selected-color                  | #FFF                                |
|                  | disabled-color                  | #F5F5F5                             |
|                  | odd-even-row                    | odd                                 |
|                  | odd-even-background             | #F0F0F0                             |
|                  | font-size                       | 13px                                |
|                  | font-weight                     | 500                                 |
| **dialogs**      | size                            | 20px                                |